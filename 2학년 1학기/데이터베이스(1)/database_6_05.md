# 6장 데이터베이스언어 SQL(4)
## 뷰(View)
* 다른 테이블을 기반으로 만들어진 가상 테이블
* 데이터를 실제로 저장하지 않고 논리적으로만 존재하는 테이블이지만, 일반 테이블과 동일한 방법으로 사용함
* 다른 뷰를 기반으로 새로운 뷰를 만드는 것도 가능함
* 뷰를 통해 기본 테이블의 내용을 쉽게 검색할 수는 있지만, 기본 테이블의 내용을 변화시키는 작업은 제한적으로 이루어짐
  * 기본 테이블: 뷰를 만드는데 기반이 되는 물리적인 테이블

### 뷰를 사용하는 이유
* 복잡한 쿼리문을 단순화하여 다수의 사용자가 결과를 쉽게 조회할 수 있음
* 뷰를 보면 컬럼과 데이터만 공개되므로 원본 테이블을 감출 수 있어 보안에
유리

* 사용자 마다 특정 객체만 조회할 수 있도록 제한을 둘 필요가 있음
  * 예) 모든 사원의 정보를 모든 사원이 볼 수 없도록 함
* 데이터의 중복성을 최소화할 수 있음
  * 예) 사원테이블에서 판매부에 속한 사원들만 찾아 다른 테이블로 만들면 중복성이 나타난다. 이럴때 뷰가 필요.

### 뷰 생성:CREATE VIEW문
* CREATE VIEW 키워드와 함께 생성할 뷰의 이름과 뷰를 구성하는 속성의 이름을 나열
  * 속성 리스트를 생략하면 SELECT 절에 나열된 속성의 이름을 그대로 사용
* AS 키워드와 함께 기본 테이블에 대한 SELECT 문 작성
  * SELECT 문은 생성하려는 뷰의 정의를 표현하며 ORDER BY는 사용 불가
* WITH CHECK OPTION
  * 뷰에 삽입이나 수정 연산을 할 때 SELECT 문에서 제시한 뷰의 정의 조건을 위반하면 수행되지 않도록 하는 제약조건을 지정


### 뷰 활용:INSERT, UPDATA, DELETE문
* 뷰에 대한 삽입,수정,삭제 연산은 실제로 기본 테이블에 수행되므로 결과적으
로는 기본 테이블이 변경됨
* 뷰에 대한 삽입,수정,삭제 연산은 제한적으로 수행됨
  * 변경 가능한 뷰 vs. 변경 불가능한 뷰
* 변경 불가능한 뷰의 특징
  * 기본 테이블의 기본키를 구성하는 속성이 포함되어 있지 않은 뷰
  * 기본 테이블에 있던 내용이 아닌 집계 함수로 새로 계산된 내용을 포함하는 뷰
  * DISTICNT 키워드를 포함하여 정의한 뷰
  * GROUP BY절을 포함하여 정의한 뷰
  * 여러 개의 테이블을 조인하여 정의한 뷰는 변경이 불가능한 경우가 많음
### 뷰의 장점
* 질의문을 좀 더 쉽게 작성할 수 있다.
  * GROUP BY, 집계 함수, 조인 등을 이용해 뷰를 미리 만들어 놓으면, 복잡한 SQL 문을 작성
하지 않아도 SELECT 절과 FROM 절만으로도 원하는 데이터의 검색이 가능
* 데이터의 보안 유지에 도움이 된다.
  * 자신에게 제공된 뷰를 통해서만 데이터에 접근하도록 권한 설정이 가능
* 데이터를 좀 더 편리하게 관리할 수 있다.
  * 제공된 뷰와 관련이 없는 다른 내용에 대해 사용자가 신경 쓸 필요가 없음
### 뷰의 단점
* 뷰의 정의 변경 불가
* 삽입, 삭제, 갱신 연산에 제한이 있음

### 뷰 삭제: DROP VIEW문
* 뷰를 삭제해도 기본 테이블은 영향을 받지 않음
* 만약, 삭제할 뷰를 참조하는 제약조건이 존재한다면?
  * 예) 삭제할 뷰를 이용해 만들어진 다른 뷰가 존재하는 경우
  * 뷰 삭제가 수행되지 않음
  * 관련된 제약조건을 먼저 삭제해야 함
