# 6장 데이터베이스언어 SQL(4)
## 뷰(View)
* 다른 테이블을 기반으로 만들어진 가상 테이블
* 데이터를 실제로 저장하지 않고 논리적으로만 존재하는 테이블이지만, 일반 테이블과 동일한 방법으로 사용함
* 다른 뷰를 기반으로 새로운 뷰를 만드는 것도 가능함
* 뷰를 통해 기본 테이블의 내용을 쉽게 검색할 수는 있지만, 기본 테이블의 내용을 변화시키는 작업은 제한적으로 이루어짐
  * 기본 테이블: 뷰를 만드는데 기반이 되는 물리적인 테이블

### 뷰를 사용하는 이유
* 복잡한 쿼리문을 단순화하여 다수의 사용자가 결과를 쉽게 조회할 수 있음
* 뷰를 보면 컬럼과 데이터만 공개되므로 원본 테이블을 감출 수 있어 보안에
유리

* 사용자 마다 특정 객체만 조회할 수 있도록 제한을 둘 필요가 있음
  * 예) 모든 사원의 정보를 모든 사원이 볼 수 없도록 함
* 데이터의 중복성을 최소화할 수 있음
  * 예) 사원테이블에서 판매부에 속한 사원들만 찾아 다른 테이블로 만들면 중복성이 나타난다. 이럴때 뷰가 필요.

### 뷰 생성:CREATE VIEW문
* CREATE VIEW 키워드와 함께 생성할 뷰의 이름과 뷰를 구성하는 속성의 이름을 나열
  * 속성 리스트를 생략하면 SELECT 절에 나열된 속성의 이름을 그대로 사용
* AS 키워드와 함께 기본 테이블에 대한 SELECT 문 작성
  * SELECT 문은 생성하려는 뷰의 정의를 표현하며 ORDER BY는 사용 불가
* WITH CHECK OPTION
  * 뷰에 삽입이나 수정 연산을 할 때 SELECT 문에서 제시한 뷰의 정의 조건을 위반하면 수행되지 않도록 하는 제약조건을 지정


### 뷰 활용:INSERT, UPDATA, DELETE문
* 뷰에 대한 삽입,수정,삭제 연산은 실제로 기본 테이블에 수행되므로 결과적으
로는 기본 테이블이 변경됨
* 뷰에 대한 삽입,수정,삭제 연산은 제한적으로 수행됨
  * 변경 가능한 뷰 vs. 변경 불가능한 뷰
* 변경 불가능한 뷰의 특징
  * 기본 테이블의 기본키를 구성하는 속성이 포함되어 있지 않은 뷰
  * 기본 테이블에 있던 내용이 아닌 집계 함수로 새로 계산된 내용을 포함하는 뷰
  * DISTICNT 키워드를 포함하여 정의한 뷰
  * GROUP BY절을 포함하여 정의한 뷰
  * 여러 개의 테이블을 조인하여 정의한 뷰는 변경이 불가능한 경우가 많음
### 뷰의 장점
* 질의문을 좀 더 쉽게 작성할 수 있다.
  * GROUP BY, 집계 함수, 조인 등을 이용해 뷰를 미리 만들어 놓으면, 복잡한 SQL 문을 작성
하지 않아도 SELECT 절과 FROM 절만으로도 원하는 데이터의 검색이 가능
* 데이터의 보안 유지에 도움이 된다.
  * 자신에게 제공된 뷰를 통해서만 데이터에 접근하도록 권한 설정이 가능
* 데이터를 좀 더 편리하게 관리할 수 있다.
  * 제공된 뷰와 관련이 없는 다른 내용에 대해 사용자가 신경 쓸 필요가 없음
### 뷰의 단점
* 뷰의 정의 변경 불가
* 삽입, 삭제, 갱신 연산에 제한이 있음

### 뷰 삭제: DROP VIEW문
* 뷰를 삭제해도 기본 테이블은 영향을 받지 않음
* 만약, 삭제할 뷰를 참조하는 제약조건이 존재한다면?
  * 예) 삭제할 뷰를 이용해 만들어진 다른 뷰가 존재하는 경우
  * 뷰 삭제가 수행되지 않음
  * 관련된 제약조건을 먼저 삭제해야 함

# 7장 데이터베이스 설계
## 1. 데이터베이스 설계 단계
* 데이터베이스 설계
  * 사용자의 다양한 요구 사항을 고려하여 데이터베이스를 생성하는 과정
* 관계 데이터베이스의 대표적인 설계 방법
  * E-R 모델과 릴레이션 변환 규칙을 이용한 설계

### E-R모델과 릴레이션 변환 규칙을 이용한 설계의 과정
1. **요구 사항 분석**
   * 데이터베이스의 용도 파악
   * 결과물: 요구 사항 명세서
2. **개념적 설계**
   * DBMS에 독립적인 개념적 구조 설계
   * 결과물: 개념적 스키마(E-R다이어그램)
3. **논리적 설계**
   * DBMS에 적합한 논리적 구조 설계
   * 결과물: 논리적 스키마(릴레이션 스키마)
4. 물리적 설계
   * DBMS로 구현 가능한 물리적 구조 설계
   * 결과물: 물리적 스키마
5. 구현
   * SQL문을 작성한 후 이를 DBMS에서 실행하여 데이터베이스 생성
>> 설계 과정 중에 오류를 발견하여 변경이 필요하면 이전 단계로 되돌아가 설계 내용을 변경 가능

### 설계 1단계: 요구 사항 분석
* 목적
  * 사용자의 요구 사항을 수집하고 분석하여 개발할 데이터베이스의 용도를 파악
    * 업무에 필요한 데이터가 무엇인지, 그 데이터에 어떤 처리가 필요한지 등을 고려
* 결과물
  * 요구 사항 명세서
* 주요 작업
  * 데이터베이스를 실제로 사용할 주요 사용자의 범위를 결정
  * 사용자가 조직에서 수행하는 업무를 분석
  * 면담, 설문 조사, 업무 관련 문서 분석 등의 방법을 이용해 요구 사항 수집
  * 수집된 요구 사항에 대한 분석 결과를 요구 사항 명세서로 작성
### 설계 2단계: 개념적 설계
* 개체 단위로 설계를 함
  * 각 개체에 어떤 속성을 가지게 할 것인지
* 개체 끼리의 관계를 정의해야함
  * 두 개 이상의 개체가 관계로 묶였을 때, 구체적으로 어떤 속성이 추가 될 수 있는지
    * e.g.) 회원, 상품이라는 두 개체가 있을 때, 주문이라는 관계에 추가로 필요한 속성은 주문번호, 주문일자, 수량 등이 있음
  * 그리고 관계가 1:n, 1:1, n:m등 관계를 정의 해주어야함
    * e.g.) 회원과 상품의 주문관계에서 회원은 많은 상품을 주문할 수 있다, 상품도 많은 회원이 시킬 수 있다. 따라서 n:m관계로 정의
* 이렇게 설계된 정보로 E-R다이어그램(개념적 스키마)을 작성한다.